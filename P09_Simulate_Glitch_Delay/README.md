# Project 9 - Simulate Glitch and Delay (VHDL/ISim)

## –¶–µ–ª—å
–ü–æ–∫–∞–∑–∞—Ç—å, –∫–∞–∫ **–∑–∞–¥–µ—Ä–∂–∫–∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è** –≤ –∫–æ–º–±–∏–Ω–∞—Ü–∏–æ–Ω–Ω–æ–π —Å—Ö–µ–º–µ –º–æ–≥—É—Ç –≤—ã–∑–≤–∞—Ç—å **glitch (hazard)** –¥–∞–∂–µ —Ç–∞–º, –≥–¥–µ –±—É–ª–µ–≤–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π.
Digilent –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —è–≤–Ω–æ –∑–∞–¥–∞—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –∫–∞–∂–¥–æ–≥–æ "—ç–ª–µ–º–µ–Ω—Ç–∞" –≤ —Å–∏–º—É–ª—è—Ç–æ—Ä–µ –∏ —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å—Ö–µ–º—ã –º–µ–Ω—è–µ—Ç—Å—è –∏–∑-–∑–∞ delay.  
–¢–∞–∫–∂–µ —Ü–µ–ª—å - –ø–æ–Ω—è—Ç—å –ø—Ä–∏—á–∏–Ω—É glitch –∏ —Å–ø–æ—Å–æ–± —É–±—Ä–∞—Ç—å static glitch –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –ª–∏—à–Ω–µ–≥–æ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Ä–º–∞.  

üé¨ –í–∏–¥–µ–æ (#17): https://youtu.be/WYkjfb8ZZUI

## –°—Ö–µ–º–∞
–†–µ–∞–ª–∏–∑—É–µ—Ç—Å—è:
- `N1 = A & B`
- `N2 = ~B`
- `N3 = N2 & C`
- `X  = N1 | N3`

–ü—Ä–æ–±–ª–µ–º–∞: –æ—Ç –≤—Ö–æ–¥–∞ `B` –∫ –≤—ã—Ö–æ–¥—É `X` –µ—Å—Ç—å –¥–≤–∞ –ø—É—Ç–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ —Å—É–º–º–∞—Ä–Ω—ã–º–∏ –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏ (unbalanced path), –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö `A` –∏ `C` –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ `B` –Ω–∞ –≤—ã—Ö–æ–¥–µ –º–æ–∂–µ—Ç –ø–æ—è–≤–∏—Ç—å—Å—è –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø—Ä–æ–≤–∞–ª.  

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ static-1 hazard
–î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–¥—É–Ω–¥–∞–Ω—Ç–Ω—ã–π (–∫–æ–Ω—Å–µ–Ω—Å—É—Å–Ω—ã–π) —Ç–µ—Ä–º:
- `N4 = A & C`
- `X = (A&B) | (~B&C) | (A&C)`

–ü—Ä–∏ `A=C=1` —Ç–µ—Ä–º `A&C` –ø–æ—Å—Ç–æ—è–Ω–Ω–æ 1 –∏ –Ω–µ –¥–∞—ë—Ç –≤—ã—Ö–æ–¥—É –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —É–ø–∞—Å—Ç—å.

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤ ISE/ISim
1. –î–æ–±–∞–≤—å `P09_Simulate_Glitch_Delay.vhd` –≤ –ø—Ä–æ–µ–∫—Ç.
2. –î–æ–±–∞–≤—å `tb_P09_Simulate_Glitch_Delay.vhd` –≤ Simulation Sources.
3. –°–¥–µ–ª–∞–π testbench top –∏ –∑–∞–ø—É—Å—Ç–∏ **Simulate Behavioral Model**.
4. –û—Ç–∫—Ä–æ–π waveform –∏ —Å–º–æ—Ç—Ä–∏ —Å–∏–≥–Ω–∞–ª—ã `A,B,C,X_haz,X_fix`.

–û–∂–∏–¥–∞–Ω–∏–µ (–∫–∞–∫ —É Digilent): glitch –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ `A=1`, `C=1` –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ `B` (–æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ –ø–µ—Ä–µ—Ö–æ–¥–µ `1‚Üí0`), –∏ –¥–ª–∏—Ç—Å—è –ø–æ—Ä—è–¥–∫–∞ 1 –Ω—Å –ø—Ä–∏ –∑–∞–¥–µ—Ä–∂–∫–∞—Ö 1 –Ω—Å –Ω–∞ –∫–∞–∂–¥–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ.  
–í –∫–æ–Ω—Å–æ–ª–∏ ISim –±—É–¥–µ—Ç `Measured glitch width ...` –∏ `TB PASSED...`.

## –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã (–∫–∞–∫ –≤ Digilent)
- –ü–æ—Å—Ç–∞–≤—å –∑–∞–¥–µ—Ä–∂–∫—É OR –±–æ–ª—å—à–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä 2 ns) –∏ –ø–æ—Å–º–æ—Ç—Ä–∏, –∫–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—Å—è –º–æ–º–µ–Ω—Ç/–¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.
- –ü–æ—Å—Ç–∞–≤—å –≤—Å–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –ø–æ 5 ns –∏ —Å—Ä–∞–≤–Ω–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
–≠—Ç–æ —É–¥–æ–±–Ω–æ –¥–µ–ª–∞—Ç—å —á–µ—Ä–µ–∑ generics `T_*` –≤ `P09_Simulate_Glitch_Delay`.

## –ö–∞–∫ –Ω–∞–π—Ç–∏ glitch (hazard) –Ω–∞ waveform –≤ ISim –∏ –ø–æ–Ω—è—Ç—å, –æ—Ç–∫—É–¥–∞ –æ–Ω –±–µ—Ä—ë—Ç—Å—è

### 1) –ß—Ç–æ –∏–º–µ–Ω–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å
–í waveform –¥–æ–±–∞–≤—å —Å–∏–≥–Ω–∞–ª—ã:
- –≤—Ö–æ–¥—ã: `A`, `B`, `C`
- –≤—ã—Ö–æ–¥—ã: `X_haz` (—Å –≥–ª–∏—Ç—á–µ–º), `X_fix` (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π)
- –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —É–∑–ª—ã (–µ—Å–ª–∏ –æ–Ω–∏ –≤—ã–≤–µ–¥–µ–Ω—ã –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∫–∞–∫ `signal`): `N1`, `N2`, `N3` (–∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ `N4`)

–°–º—ã—Å–ª —É–∑–ª–æ–≤:
- `N1 = A & B`
- `N2 = not B`
- `N3 = N2 & C`
- `X_haz = N1 or N3` (–±–µ–∑ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
- `X_fix = N1 or N3 or N4`, –≥–¥–µ `N4 = A & C` (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ static-1 hazard)

### 2) –ì–¥–µ glitch –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —ç—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ (—Å–∞–º—ã–π –Ω–∞–≥–ª—è–¥–Ω—ã–π –∫–µ–π—Å)
Glitch –ª–µ–≥—á–µ –≤—Å–µ–≥–æ —É–≤–∏–¥–µ—Ç—å –ø—Ä–∏:
- `A = 1`
- `C = 1`
- –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ `B` (–æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ –ø–µ—Ä–µ—Ö–æ–¥–µ `1 ‚Üí 0`)

–õ–æ–≥–∏—á–µ—Å–∫–∏ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è `X = 1`, –Ω–æ –∏–∑-–∑–∞ –∑–∞–¥–µ—Ä–∂–µ–∫ –ø—É—Ç–µ–π –≤—ã—Ö–æ–¥ `X_haz` –º–æ–∂–µ—Ç –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø—Ä–æ–≤–∞–ª–∏—Ç—å—Å—è –≤ `0`.

### 3) –ö–∞–∫ "–ø–æ–π–º–∞—Ç—å" glitch –Ω–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–≥—Ä–∞–º–º–µ
1. –ó–∞–ø—É—Å—Ç–∏ —Å–∏–º—É–ª—è—Ü–∏—é –∏ –Ω–∞–π–¥–∏ –Ω–∞ waveform —É—á–∞—Å—Ç–æ–∫, –≥–¥–µ `A=1` –∏ `C=1`.
2. –ù–∞–π–¥–∏ –º–æ–º–µ–Ω—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è `B` (—Ñ—Ä–æ–Ω—Ç –∏–ª–∏ —Å–ø–∞–¥).
3. –£–≤–µ–ª–∏—á—å –º–∞—Å—à—Ç–∞–± –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (Zoom In), –ø–æ–∫–∞ –Ω–µ —É–≤–∏–¥–∏—à—å –¥–µ—Ç–∞–ª–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥.
4. –°–º–æ—Ç—Ä–∏ –Ω–∞ `X_haz`:
   - glitch –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –∫–æ—Ä–æ—Ç–∫–∏–π "–∑—É–±—á–∏–∫" (–∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏–º–ø—É–ª—å—Å 0 –∏–ª–∏ 1),
   - —á–∞—â–µ –≤—Å–µ–≥–æ —ç—Ç–æ –æ—á–µ–Ω—å —É–∑–∫–∏–π –ø—Ä–æ–≤–∞–ª/–≤—Å–ø–ª–µ—Å–∫ –º–µ–∂–¥—É –¥–≤—É–º—è —Å—Ç–∞–±–∏–ª—å–Ω—ã–º–∏ —É—á–∞—Å—Ç–∫–∞–º–∏.

> –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –∑–∞–¥–µ—Ä–∂–∫–∏ —á–µ—Ä–µ–∑ `transport`, –∫–æ—Ä–æ—Ç–∫–∏–µ –∏–º–ø—É–ª—å—Å—ã –Ω–µ "—Å—ä–µ–¥–∞—é—Ç—Å—è" –∏ –≤–∏–¥–Ω—ã –Ω–∞ waveform.

### 4) –ö–∞–∫ –ø–æ–Ω—è—Ç—å, –ø–æ—á–µ–º—É –æ–Ω –≤–æ–∑–Ω–∏–∫ (—Ä–∞–∑–±–æ—Ä –ø–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º —É–∑–ª–∞–º)
–°—Ä–∞–≤–Ω–∏ –º–æ–º–µ–Ω—Ç—ã –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π `N1` –∏ `N3` –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è `B`:

- –ü—Ä–∏ `A=C=1` –∏ –ø–µ—Ä–µ—Ö–æ–¥–µ `B: 1 ‚Üí 0`:
  - `N1 = A&B` –ø–∞–¥–∞–µ—Ç –ø–æ—Å–ª–µ —Å–≤–æ–µ–π –∑–∞–¥–µ—Ä–∂–∫–∏ (`T_AND1`)
  - `N2 = not B` –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ `T_NOT`
  - `N3 = N2&C` –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –µ—â—ë –ø–æ–∑–∂–µ: –ø–æ—Å–ª–µ `T_NOT + T_AND2`

–ï—Å–ª–∏ –≤ –ø—Ä–æ–º–µ–∂—É—Ç–∫–µ –≤—Ä–µ–º–µ–Ω–∏ **–∏ `N1=0`, –∏ `N3=0`**, —Ç–æ –Ω–∞ OR-—ç–ª–µ–º–µ–Ω—Ç–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è **`X_haz=0`** - —ç—Ç–æ –∏ –µ—Å—Ç—å glitch.
–ù–∞ waveform —ç—Ç–æ –æ–±—ã—á–Ω–æ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:
- `N1` —É–∂–µ —Å–º–µ–Ω–∏–ª—Å—è,
- `N3` –µ—â—ë –Ω–µ —Å–º–µ–Ω–∏–ª—Å—è,
- –∏ —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–º `N3` –¥–æ–≥–æ–Ω—è–µ—Ç - `X_haz` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ 1.

### 5) –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏
–°–º–æ—Ç—Ä–∏ `X_fix`:
- –ø—Ä–∏ —Ç–µ—Ö –∂–µ —É—Å–ª–æ–≤–∏—è—Ö (`A=C=1`, `B` –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è) **`X_fix` –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–∞–ª–∏–≤–∞—Ç—å—Å—è**.
–ü—Ä–∏—á–∏–Ω–∞: –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–π —Ç–µ—Ä–º `N4 = A&C` –¥–µ—Ä–∂–∏—Ç OR "–≤ –µ–¥–∏–Ω–∏—Ü–µ", –∑–∞–∫—Ä—ã–≤–∞—è –æ–∫–Ω–æ, –∫–æ–≥–¥–∞ `N1` –∏ `N3` –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω—É–ª–∏.

### 6) –ü–æ–ª–µ–∑–Ω—ã–π –ø—Ä–∏—ë–º: –∏–∑–º–µ—Ä–∏—Ç—å —à–∏—Ä–∏–Ω—É glitch
–ù–∞ waveform –º–æ–∂–Ω–æ –∏–∑–º–µ—Ä–∏—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å "–∑—É–±—á–∏–∫–∞":
- –ø–æ—Å—Ç–∞–≤—å –∫—É—Ä—Å–æ—Ä—ã –Ω–∞ –º–æ–º–µ–Ω—Ç –ø–∞–¥–µ–Ω–∏—è `X_haz` –∏ –º–æ–º–µ–Ω—Ç –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ 1,
- —Ä–∞–∑–Ω–∏—Ü–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ ‚âà —à–∏—Ä–∏–Ω–∞ glitch.
–û–Ω–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–Ω–∏—Ü—ã —Å—É–º–º–∞—Ä–Ω—ã—Ö –∑–∞–¥–µ—Ä–∂–µ–∫ –ø—É—Ç–µ–π (unbalanced path).

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å —É—Å–∏–ª–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç, —É–≤–µ–ª–∏—á—å –∑–Ω–∞—á–µ–Ω–∏—è `T_*` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ 5 ns) - glitch —Å—Ç–∞–Ω–µ—Ç "—à–∏—Ä–µ" –∏ –≤–∏–∑—É–∞–ª—å–Ω–æ –∑–∞–º–µ—Ç–Ω–µ–µ.


[![–í–∏–¥–µ–æ #16](https://img.youtube.com/vi/WYkjfb8ZZUI/maxresdefault.jpg)](https://youtu.be/WYkjfb8ZZUI)

