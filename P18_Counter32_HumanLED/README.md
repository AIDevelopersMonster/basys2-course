# P18 - 32-–±–∏—Ç–Ω—ã–π —Å—á—ë—Ç—á–∏–∫ –∏ "—á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–µ" –±–∏—Ç—ã –Ω–∞ LED (Basys2)

üé¨ –í–∏–¥–µ–æ (#26): https://youtu.be/WOB2ujp1g3o

## –ò–¥–µ—è –ø—Ä–æ–µ–∫—Ç–∞
FPGA —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—ã—Å–æ–∫–æ–π —Ç–∞–∫—Ç–æ–≤–æ–π —á–∞—Å—Ç–æ—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, **50 –ú–ì—Ü**). –ï—Å–ª–∏ –Ω–∞–ø—Ä—è–º—É—é –≤—ã–≤–æ–¥–∏—Ç—å –º–ª–∞–¥—à–∏–µ –±–∏—Ç—ã —Å—á—ë—Ç—á–∏–∫–∞ –Ω–∞ —Å–≤–µ—Ç–æ–¥–∏–æ–¥—ã, –æ–Ω–∏ –±—É–¥—É—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è —Å–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–æ –∏ "—Å–ª–∏–≤–∞—Ç—å—Å—è".

–ü–æ—ç—Ç–æ–º—É –≤ P18 –º—ã –¥–µ–ª–∞–µ–º:
- **32-–±–∏—Ç–Ω—ã–π –¥–≤–æ–∏—á–Ω—ã–π —Å—á—ë—Ç—á–∏–∫**, –∫–æ—Ç–æ—Ä—ã–π —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ç–∞–∫—Ç `MCLK`
- –Ω–∞ —Å–≤–µ—Ç–æ–¥–∏–æ–¥—ã –≤—ã–≤–æ–¥–∏–º **—Å—Ç–∞—Ä—à–∏–µ (–º–µ–¥–ª–µ–Ω–Ω—ã–µ) –±–∏—Ç—ã**, –∫–æ—Ç–æ—Ä—ã–µ –≤–∏–¥–Ω–æ –≥–ª–∞–∑–∞–º–∏

## –ü–æ—á–µ–º—É —Ä–∞–∑—Ä—è–¥—ã —Å—á—ë—Ç—á–∏–∫–∞ - —ç—Ç–æ –¥–µ–ª–∏—Ç–µ–ª–∏ —á–∞—Å—Ç–æ—Ç—ã
–î–≤–æ–∏—á–Ω—ã–π —Å—á—ë—Ç—á–∏–∫ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∂–¥—É—é —Ç–∞–∫—Ç–æ–≤—É—é –≤—Å–ø—ã—à–∫—É.  
–ö–∞–∂–¥—ã–π —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑—Ä—è–¥ –º–µ–Ω—è–µ—Ç—Å—è **–≤ 2 —Ä–∞–∑–∞ —Ä–µ–∂–µ**, –ø–æ—ç—Ç–æ–º—É:

**–ë–∏—Ç n** –∏–º–µ–µ—Ç —á–∞—Å—Ç–æ—Ç—É:
\[
f_n = \frac{f_{clk}}{2^{n+1}}
\]

–ü—Ä–∏–º–µ—Ä –ø—Ä–∏ `f_clk = 50 –ú–ì—Ü`:
- `cnt(0)` ~ 25 –ú–ì—Ü (–Ω–µ –≤–∏–¥–Ω–æ)
- `cnt(15)` ~ 763 –ì—Ü (–µ—â—ë –Ω–µ –≤–∏–¥–Ω–æ –∫–∞–∫ –º–∏–≥–∞–Ω–∏–µ)
- `cnt(24)` ~ 1.49 –ì—Ü (—É–∂–µ –≤–∏–¥–Ω–æ)
- `cnt(25)` ~ 0.745 –ì—Ü (–ø—Ä–∏–º–µ—Ä–Ω–æ —Ä–∞–∑ –≤ 1.3 —Å–µ–∫—É–Ω–¥—ã)
- `cnt(31)` ~ 0.0116 –ì—Ü (–ø—Ä–∏–º–µ—Ä–Ω–æ —Ä–∞–∑ –≤ 86 —Å–µ–∫—É–Ω–¥)

## –ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ 32-–±–∏—Ç–Ω—ã–π —Å—á—ë—Ç—á–∏–∫
32 –±–∏—Ç–∞ –¥–∞—é—Ç —à–∏—Ä–æ–∫–∏–π –¥–∏–∞–ø–∞–∑–æ–Ω "–≥–æ—Ç–æ–≤—ã—Ö –¥–µ–ª–∏—Ç–µ–ª–µ–π":
- –±—ã—Å—Ç—Ä—ã–µ –±–∏—Ç—ã –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ "–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ" —á–∞—Å—Ç–æ—Ç—ã
- —Å—Ç–∞—Ä—à–∏–µ - –¥–ª—è LED/–∏–Ω–¥–∏–∫–∞—Ü–∏–∏/—Ç–∞–π–º–µ—Ä–æ–≤

–≠—Ç–æ –ø—Ä–æ—Å—Ç–æ–π, —Ä–µ—Å—É—Ä—Å–Ω–æ –¥–µ—à—ë–≤—ã–π –∏ –Ω–∞–≥–ª—è–¥–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø –¥–µ–ª–µ–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã.

---

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (Basys2)

### –ö–Ω–æ–ø–∫–∏
- `BTN0` - **RESET** (—Å–±—Ä–æ—Å–∏—Ç—å —Å—á—ë—Ç—á–∏–∫ –≤ 0)

### –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏
- `SW7` - –≤—ã–±–æ—Ä "–æ–∫–Ω–∞" –±–∏—Ç–æ–≤ –¥–ª—è LED:
  - `SW7 = 0` ‚Üí `LED = cnt(31:24)` (–æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ, "–ø–æ—á—Ç–∏ —Å–µ–∫—É–Ω–¥–æ–º–µ—Ä")
  - `SW7 = 1` ‚Üí `LED = cnt(27:20)` (–±—ã—Å—Ç—Ä–µ–µ, —ç—Ñ—Ñ–µ–∫—Ç–Ω–µ–µ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏)

### –°–≤–µ—Ç–æ–¥–∏–æ–¥—ã
- `LED[7:0]` - –≤—ã–±—Ä–∞–Ω–Ω—ã–µ 8 –±–∏—Ç —Å—á—ë—Ç—á–∏–∫–∞ ("—á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–µ")

---

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–ª–∞—Ç–µ

1) –ü—Ä–æ—à–∏—Ç—å –ø—Ä–æ–µ–∫—Ç, –≤–∫–ª—é—á–∏—Ç—å –ø–ª–∞—Ç—É  
2) –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ LED "–ø–µ—Ä–µ–ª–∏–≤–∞—é—Ç—Å—è" (–º–µ–Ω—è—é—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏—è)
3) –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å `SW7`:
   - –≤ –ø–æ–ª–æ–∂–µ–Ω–∏–∏ 1 –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—É–¥—É—Ç –∑–∞–º–µ—Ç–Ω–æ –±—ã—Å—Ç—Ä–µ–µ
4) –ù–∞–∂–∞—Ç—å `BTN0`:
   - —Å—á—ë—Ç—á–∏–∫ —Å–±—Ä–æ—Å–∏—Ç—Å—è, —Ä–∏—Å—É–Ω–æ–∫ –Ω–∞ LED –Ω–∞—á–Ω—ë—Ç—Å—è –∑–∞–Ω–æ–≤–æ

---

## –ö–∞–∫ –ª—É—á—à–µ –¥–µ–ª–∞—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏ –Ω–∞ FPGA (–≤–∞–∂–Ω–æ–µ –ø–æ—è—Å–Ω–µ–Ω–∏–µ)
‚ùå **–ù–µ–ª—å–∑—è** –¥–µ–ª–∞—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏ —á–µ—Ä–µ–∑ `wait for ...` –≤ —Å–∏–Ω—Ç–µ–∑–∏—Ä—É–µ–º–æ–º VHDL - —ç—Ç–æ —Ç–æ–ª—å–∫–æ –¥–ª—è testbench.

‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è "–∑–∞–¥–µ—Ä–∂–∫–∞" –≤ –∂–µ–ª–µ–∑–µ –¥–µ–ª–∞–µ—Ç—Å—è —Ç–∞–∫:
- —Å—á–∏—Ç–∞–µ–º —Ç–∞–∫—Ç—ã (—Å—á—ë—Ç—á–∏–∫)
- —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Å –∫–æ–Ω—Å—Ç–∞–Ω—Ç–æ–π
- –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º "—Ç–∏–∫" (enable) —Ä–∞–∑ –≤ N —Ç–∞–∫—Ç–æ–≤

–í P18 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –≤–∞—Ä–∏–∞–Ω—Ç:
- –±–µ—Ä—ë–º —Å—Ç–∞—Ä—à–∏–π –±–∏—Ç —Å—á—ë—Ç—á–∏–∫–∞ –∫–∞–∫ "–º–µ–¥–ª–µ–Ω–Ω—ã–π —Å–∏–≥–Ω–∞–ª"

–î–ª—è —Ç–æ—á–Ω–æ–≥–æ 1 –ì—Ü –ª—É—á—à–µ –¥–µ–ª–∞—Ç—å –¥–µ–ª–∏—Ç–µ–ª—å —á–µ—Ä–µ–∑ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å `DIV_MAX` (–∫–∞–∫ –≤ P17),
–Ω–æ P18 —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–±—ã—Å—Ç—Ä—ã–π –∏ –ø—Ä–æ—Å—Ç–æ–π" –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã–π –ø—Ä–∏—ë–º.

---

## Testbench
–§–∞–π–ª `P18_Counter32_HumanLED_tb.vhd` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
- –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç —Å—á—ë—Ç—á–∏–∫–∞
- —Ä–∞–±–æ—Ç—É —Å–±—Ä–æ—Å–∞
- –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –æ–∫–Ω–∞ `SW7`

Testbench –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –º–µ—Ç–æ–¥–∏–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ –∏ —É–ø—Ä–∞–≤–ª—è—é—â–∏—Ö —Å–∏–≥–Ω–∞–ª–æ–≤.

[![–í–∏–¥–µ–æ #26](https://img.youtube.com/vi/WOB2ujp1g3oI/maxresdefault.jpg)](https://youtu.be/WOB2ujp1g3o)
