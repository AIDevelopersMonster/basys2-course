# Project 8 - Hierarchical Design: Simple Comms System (MUX + DeMUX) | Basys2 | VHDL

## Идея
Система демонстрирует **иерархический дизайн**: собираем верхний модуль (wrapper) из двух подмодулей:
`MUX 4→1` выбирает один вход `I0..I3` и передаёт его в общий сигнал `sdata`,
а `DeMUX 1→4` по тем же линиям выбора `S` отправляет `sdata` на один из выходов `Y0..Y3`.

Критерий корректности:
- `sdata = I(sel)`
- ровно один выход активен: `Y(sel)=sdata`, остальные `0`.

---

## Подключение (SW/LED)
**Входы (SW):**
- `SW(3..0)` = `I0..I3` (данные)
- `SW(5..4)` = `S0..S1` (выбор)
- `SW(7..6)` не используются (держать 0)

**Выходы (LED):**
- `LED(3..0)` = `Y0..Y3`
- `LED(4)`   = `sdata` (сигнал "в канале")
- `LED(6..5)` = `S1:S0`
- `LED(7)` = 0

---

## Проверка прошивки на плате
1) После программирования FPGA `LED(6..5)` должны повторять выбор `SW(5..4)` (это быстрая проверка, что прошивка "живая").
2) Меняйте `SW(3..0)` и `SW(5..4)`:
   - `LED(4)` должен показывать выбранный вход (`sdata`),
   - один из `LED(3..0)` будет равен `LED(4)`, остальные 0.
3) Если `LED(6..5)` не соответствует `SW(5..4)` - чаще всего проблема в прошивке/не тот top/UCF.

---

## Примеры проверки "байт на SW → байт на LED" (ОБЯЗАТЕЛЬНО)
Форматы байт:

- `SW[7:0] = 0 0 S1 S0 I3 I2 I1 I0`
- `LED[7:0] = 0 S1 S0 sdata Y3 Y2 Y1 Y0`
  (где `Yk` - выходы DeMUX, `sdata` - выбранный вход)

Тест-векторы:

1) **SW = 0x01** (`00 00 0001`) → выбираем `I0=1`, `S=00`  
   Ожидаем: `sdata=1`, `Y0=1` → **LED = 0x11** (`0 00 1 0001`)

2) **SW = 0x24** (`00 10 0100`) → `I2=1`, `S=10`  
   Ожидаем: `sdata=1`, `Y2=1` → **LED = 0x54** (`0 10 1 0100`)

3) **SW = 0x18** (`00 01 1000`) → `I3=1`, но выбираем `S=01` (смотрим `I1=0`)  
   Ожидаем: `sdata=0`, все `Y=0` → **LED = 0x20** (`0 01 0 0000`)

4) **SW = 0x3F** (`00 11 1111`) → все входы 1, `S=11`  
   Ожидаем: `sdata=1`, `Y3=1` → **LED = 0x78** (`0 11 1 1000`)

---

## Файлы
- `mux_4to1.vhd` - подмодуль MUX
- `demux_1to4.vhd` - подмодуль DeMUX
- `P08_Hierarchical_Comms_System.vhd` - top (wrapper, структурная схема)
- `tb_P08_Hierarchical_Comms_System.vhd` - testbench (64 вектора + assert)
