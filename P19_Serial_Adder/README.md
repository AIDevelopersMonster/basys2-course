# P19 - Serial Adder (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π —Å—É–º–º–∞—Ç–æ—Ä)

–ü—Ä–æ–µ–∫—Ç **P19** –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç **–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ (bit‚Äëserial) —Å–ª–æ–∂–µ–Ω–∏–µ** –¥–≤—É—Ö 4‚Äë–±–∏—Ç–Ω—ã—Ö —á–∏—Å–µ–ª –Ω–∞ –ø–ª–∞—Ç–µ **Digilent Basys 2 (Spartan‚Äë3E)**.

üé¨ –í–∏–¥–µ–æ (#27): https://youtu.be/g1Br9MCaMvY


–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ —Å—É–º–º–∞—Ç–æ—Ä–∞, –≥–¥–µ –≤—Å–µ —Ä–∞–∑—Ä—è–¥—ã —Å–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –≤ serial‚Äëadder –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **–ø–æ –æ–¥–Ω–æ–º—É –±–∏—Ç—É –∑–∞ —à–∞–≥**:

1. –ë–µ—Ä—ë–º –º–ª–∞–¥—à–∏–µ –±–∏—Ç—ã `A0` –∏ `B0` –∏ —Ç–µ–∫—É—â–∏–π –ø–µ—Ä–µ–Ω–æ—Å `carry`.
2. –ü–æ–ª–Ω—ã–π —Å—É–º–º–∞—Ç–æ—Ä (full adder) –≤—ã–¥–∞—ë—Ç –±–∏—Ç —Å—É–º–º—ã `S0` –∏ –Ω–æ–≤—ã–π –ø–µ—Ä–µ–Ω–æ—Å `carry_next`.
3. `S0` –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ø–æ–∑–∏—Ü–∏—é —Ç–µ–∫—É—â–µ–≥–æ –∏–Ω–¥–µ–∫—Å–∞ `bit_idx`.
4. –†–µ–≥–∏—Å—Ç—Ä—ã `A` –∏ `B` —Å–¥–≤–∏–≥–∞—é—Ç—Å—è –≤–ø—Ä–∞–≤–æ, `carry := carry_next`, `bit_idx++`.
5. –ß–µ—Ä–µ–∑ `N=4` —à–∞–≥–∞ –ø–æ–ª—É—á–∞–µ–º `SUM[3:0]` –∏ `COUT`.



---

## –§–∞–π–ª—ã

- `P19_Serial_Adder.vhd` - –≤–µ—Ä—Ö–Ω–∏–π –º–æ–¥—É–ª—å –ø—Ä–æ–µ–∫—Ç–∞ (–ø–æ–¥ –ø–ª–∞—Ç—É)
- `P19_Serial_Adder_tb.vhd` - —Ç–µ—Å—Ç–±–µ–Ω—á (–±—ã—Å—Ç—Ä–∞—è —Å–∏–º—É–ª—è—Ü–∏—è –∑–∞ —Å—á—ë—Ç —É–∫–æ—Ä–æ—á–µ–Ω–Ω–æ–≥–æ debounce)

---

## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Basys 2 (–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏/–∫–Ω–æ–ø–∫–∏/—Å–≤–µ—Ç–æ–¥–∏–æ–¥—ã)

### –í–≤–æ–¥

- `SW(3 downto 0)` ‚Üí —á–∏—Å–ª–æ **A[3:0]**
- `SW(7 downto 4)` ‚Üí —á–∏—Å–ª–æ **B[3:0]**

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

- `BTN3` ‚Üí **LOAD/RESET** (–∑–∞–≥—Ä—É–∑–∏—Ç—å A,B –∏ —Å–±—Ä–æ—Å–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è)
- `BTN0` ‚Üí **STEP** (–≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–¥–∏–Ω —à–∞–≥ —Å–ª–æ–∂–µ–Ω–∏—è; –≤ –∫–æ–¥–µ –µ—Å—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥—Ä–µ–±–µ–∑–≥–∞)

### –í—ã–≤–æ–¥

- `LED(3 downto 0)` ‚Üí **SUM[3:0]**
- `LED4` ‚Üí **COUT** (–ø–µ—Ä–µ–Ω–æ—Å –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è; –≥–æ—Ä–∏—Ç —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ `done=1`)
- `LED(7 downto 5)` ‚Üí **bit_idx** (–Ω–∞ –∫–∞–∫–æ–º —Ä–∞–∑—Ä—è–¥–µ —Å–µ–π—á–∞—Å –Ω–∞—Ö–æ–¥–∏–º—Å—è: 0..3)

---

## –ö–∞–∫ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –Ω–∞ –ø–ª–∞—Ç–µ (–ø–æ—à–∞–≥–æ–≤—ã–π —Ä–µ–∂–∏–º)

### –ë—ã—Å—Ç—Ä—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º
1. –í—ã—Å—Ç–∞–≤—å—Ç–µ –Ω–∞ —Ç—É–º–±–ª–µ—Ä–∞—Ö –∑–Ω–∞—á–µ–Ω–∏–µ **A** (`SW3..SW0`) –∏ **B** (`SW7..SW4`).
2. –ù–∞–∂–º–∏—Ç–µ `BTN3` (**LOAD/RESET**) - —Ä–µ–≥–∏—Å—Ç—Ä—ã A,B –∑–∞–≥—Ä—É–∑—è—Ç—Å—è, `SUM` –∏ `COUT` –æ–±–Ω—É–ª—è—Ç—Å—è, —à–∞–≥ —Å—Ç–∞–Ω–µ—Ç `0`.
3. –ù–∞–∂–∏–º–∞–π—Ç–µ `BTN0` (**STEP**) **—Ä–æ–≤–Ω–æ 4 —Ä–∞–∑–∞** (–ø–æ —á–∏—Å–ª—É —Ä–∞–∑—Ä—è–¥–æ–≤). –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑—Ä—è–¥ –∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Å–≤–µ—Ç–æ–¥–∏–æ–¥—ã.

> –ü–æ–¥—Å–∫–∞–∑–∫–∞: `LED7..LED5` - —ç—Ç–æ –Ω–æ–º–µ—Ä —Ç–µ–∫—É—â–µ–≥–æ —à–∞–≥–∞/—Ä–∞–∑—Ä—è–¥–∞ `bit_idx` (0‚Ä¶3).  
> `LED3..LED0` - –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ–º–∞—è —Å—É–º–º–∞ `SUM[3:0]`.  
> `LED4` (`COUT`) –∑–∞–≥–æ—Ä–∞–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è** (–ø–æ—Å–ª–µ 4‚Äë–≥–æ —à–∞–≥–∞).

### –ü—Ä–∏–º–µ—Ä ¬´–ø–æ —à–∞–≥–∞–º¬ª (A=6, B=5)

**–ß—Ç–æ —Å—Ç–∞–≤–∏–º –Ω–∞ —Ç—É–º–±–ª–µ—Ä–∞—Ö:**
- `A = 6` ‚Üí –¥–≤–æ–∏—á–Ω–æ `0110` ‚Üí –ø–æ—Å—Ç–∞–≤–∏—Ç—å `SW3..SW0 = 0 1 1 0`
- `B = 5` ‚Üí –¥–≤–æ–∏—á–Ω–æ `0101` ‚Üí –ø–æ—Å—Ç–∞–≤–∏—Ç—å `SW7..SW4 = 0 1 0 1`

–û–∂–∏–¥–∞–µ–º: `6 + 5 = 11` ‚Üí `SUM = 1011`, `COUT = 0`.

1) –ù–∞–∂–∏–º–∞–µ–º **BTN3 (LOAD/RESET)**  
- `LED7..LED5 = 000` (—à–∞–≥ 0)  
- `LED3..LED0 = 0000` (—Å—É–º–º–∞ –µ—â—ë –Ω–µ —Å—á–∏—Ç–∞–ª–∞—Å—å)  
- `LED4 = 0`

–î–∞–ª–µ–µ –Ω–∞–∂–∏–º–∞–µ–º **BTN0 (STEP)**:

| –ù–∞–∂–∞—Ç–∏–µ STEP | –ö–∞–∫–æ–π –±–∏—Ç —Å—á–∏—Ç–∞–µ–º | LED7..LED5 (bit_idx –ø–æ—Å–ª–µ —à–∞–≥–∞) | LED3..LED0 (SUM) | LED4 (COUT) |
|---:|---:|:---:|:---:|:---:|
| 1 | –±–∏—Ç 0 (LSB) | 001 | 0001 | 0 | 						00100001
| 2 | –±–∏—Ç 1 | 010 | 0011 | 0 | 								00100011
| 3 | –±–∏—Ç 2 | 011 | 0011 *(–±–∏—Ç2=0, –ø–µ—Ä–µ–Ω–æ—Å=1)* | 0 | 	01100011
| 4 | –±–∏—Ç 3 (MSB) | 011 *(done=1)* | 1011 | 0 | 		01101011

**–ß—Ç–æ –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤ –∫–æ–Ω—Ü–µ (–ø–æ—Å–ª–µ 4-–≥–æ STEP):**
- `LED3..LED0 = 1011` (11 –¥–µ—Å—è—Ç–∏—á–Ω–æ–µ)
- `LED4 = 0` (–ø–µ—Ä–µ–Ω–æ—Å–∞ –Ω–µ—Ç)

### –ü—Ä–∏–º–µ—Ä —Å –ø–µ—Ä–µ–Ω–æ—Å–æ–º (A=9, B=7)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —É–≤–∏–¥–µ—Ç—å –ø–µ—Ä–µ–Ω–æ—Å:
- `A=9 (1001)`, `B=7 (0111)` ‚Üí `9+7=16` ‚Üí `SUM=0000`, `COUT=1`.  
–ü–æ—Å–ª–µ 4‚Äë–≥–æ —à–∞–≥–∞ `LED4` –∑–∞–≥–æ—Ä–∏—Ç—Å—è, –∞ `LED3..LED0` –±—É–¥—É—Ç `0000`.

---

## –¢–µ–æ—Ä–∏—è: –ø–æ–ª–Ω—ã–π —Å—É–º–º–∞—Ç–æ—Ä (1 —Ä–∞–∑—Ä—è–¥)

–î–ª—è –æ–¥–Ω–æ–≥–æ —Ä–∞–∑—Ä—è–¥–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ñ–æ—Ä–º—É–ª—ã –ø–æ–ª–Ω–æ–≥–æ —Å—É–º–º–∞—Ç–æ—Ä–∞:

- `S = A XOR B XOR Cin`
- `Cout = (A AND B) OR (A AND Cin) OR (B AND Cin)`

–í –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–º —Å—É–º–º–∞—Ç–æ—Ä–µ `Cin` - —ç—Ç–æ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –ø–µ—Ä–µ–Ω–æ—Å `carry` –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —à–∞–≥–∞.

---

## –ü—Ä–æ debounce (–¥—Ä–µ–±–µ–∑–≥ –∫–Ω–æ–ø–æ–∫)

–ö–Ω–æ–ø–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–π –ø–ª–∞—Ç–µ –¥–∞—é—Ç –¥—Ä–µ–±–µ–∑–≥, –ø–æ—ç—Ç–æ–º—É –≤ –º–æ–¥—É–ª–µ –µ—Å—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è:

- –ü–∞—Ä–∞–º–µ—Ç—Ä `G_DEBOUNCE_CYCLES` –∑–∞–¥–∞—ë—Ç —á–∏—Å–ª–æ —Ç–∞–∫—Ç–æ–≤ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è `STEP`.
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `1_000_000` —Ç–∞–∫—Ç–æ–≤ ‚âà 20 –º—Å –ø—Ä–∏ 50 –ú–ì—Ü.
- –í —Ç–µ—Å—Ç–±–µ–Ω—á–µ —ç—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è (`G_DEBOUNCE_CYCLES => 10`), —á—Ç–æ–±—ã —Å–∏–º—É–ª—è—Ü–∏—è —à–ª–∞ –±—ã—Å—Ç—Ä–æ.

---

## –°–∏–º—É–ª—è—Ü–∏—è (Testbench)

`P19_Serial_Adder_tb.vhd`:

- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ –≤—Ö–æ–¥—ã (–±–µ–∑ `U/X` –Ω–∞ —Å—Ç–∞—Ä—Ç–µ).
- –ú–æ–¥–µ–ª–∏—Ä—É–µ—Ç –Ω–∞–∂–∞—Ç–∏—è `BTN3` –∏ —á–µ—Ç—ã—Ä–µ –Ω–∞–∂–∞—Ç–∏—è `BTN0`.
- –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç `SUM` –∏ `COUT` —Å —ç—Ç–∞–ª–æ–Ω–æ–º —á–µ—Ä–µ–∑ `assert` –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –Ω–∞–±–æ—Ä–æ–≤ –¥–∞–Ω–Ω—ã—Ö.

–û–∂–∏–¥–∞–µ–º—ã–π —Ñ–∏–Ω–∞–ª —Å–∏–º—É–ª—è—Ü–∏–∏: —Å–æ–æ–±—â–µ–Ω–∏–µ `All testcases passed.` –±–µ–∑ `severity error`.

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –ø–æ ISE

–ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É **FPGA Start‚ÄëUp Clock ‚Üí JTAG Clock** (–µ—Å–ª–∏ –ø—Ä–æ—à–∏–≤–∞–µ—Ç–µ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ Adept/JTAG), –∫–∞–∫ –≤ –≤–∞—à–µ–º —à–∞–±–ª–æ–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.


[![–í–∏–¥–µ–æ #27](https://img.youtube.com/vi/g1Br9MCaMvY/maxresdefault.jpg)](https://youtu.be/g1Br9MCaMvY)