# Project 4 — Multiplexer (4→1) на Basys2 (VHDL)

## Цель
Реализовать **комбинаторный мультиплексор 4→1**: по двухбитному сигналу выбора `S(1..0)` на выход `Y` передаётся один из четырёх входов `D0..D3`.

Проект сделан максимально “учебным”:
- реализация через `case` (поведенческое описание),
- отдельный **testbench** с полным перебором входов,
- простая индикация на светодиодах.

---

## Теория (коротко)
Мультиплексор 4→1 выбирает один из входов:

| S1 S0 | Выход Y |
|------:|:--------|
| 00    | D0      |
| 01    | D1      |
| 10    | D2      |
| 11    | D3      |

Логическое выражение (каноническая форма):
\[
Y = \overline{S1}\,\overline{S0}\,D0 \;+\; \overline{S1}\,S0\,D1 \;+\; S1\,\overline{S0}\,D2 \;+\; S1\,S0\,D3
\]

На практике в HDL удобнее описывать поведенчески (`case/when`), а оптимизацию логики выполнит синтезатор.

---

## Назначение переключателей и светодиодов (Basys2)

### Входы (SW)
- `SW(3 downto 0)` → данные `D3..D0` (точнее: D0=SW0, D1=SW1, D2=SW2, D3=SW3)
- `SW(5 downto 4)` → выбор `S(1..0)` (S0=SW4, S1=SW5)
- `SW(7 downto 6)` не используются (можно оставить 0)

### Выходы (LED)
- `LED(0)` → выход мультиплексора `Y`
- `LED(4 downto 1)` → one-hot индикация выбранного канала:
  - `0001` = выбран D0
  - `0010` = выбран D1
  - `0100` = выбран D2
  - `1000` = выбран D3
- `LED(7 downto 5)` = 0

---

## Файлы
- `P04_Multiplexer.vhd` — top-модуль (синтезируемый)
- `tb_P04_Multiplexer.vhd` — testbench (для ISim)
- `Basys2_100_250General.ucf` — ограничения пинов (можно использовать общий шаблон и оставить только SW/LED)

---

## Сборка и прошивка в Xilinx ISE (общий алгоритм)
1. Создать ISE Project (Spartan-3E, Basys2) или сгенерировать из шаблона.
2. Добавить `P04_Multiplexer.vhd` в **Implementation Sources** (Top Module).
3. Добавить `Basys2_100_250General.ucf` (или свой .ucf с SW/LED).
4. `Synthesize - XST` → `Implement Design` → `Generate Programming File`.
5. Прошить плату через Adept/Impact (зависит от вашей установки).

> Так как логика комбинаторная, отдельный reset не нужен: состояние определяется текущими значениями SW.

---

## Симуляция (ISim)
1. Добавить `tb_P04_Multiplexer.vhd` в **Simulation Sources**.
2. Выбрать testbench как Top для симуляции.
3. Запустить симуляцию (например, на 1 мкс).

В testbench:
- сначала входы явно инициализируются нулями (чтобы не было `U/X`),
- затем выполняется полный перебор 64 комбинаций `SW(5 downto 0)`,
- проверяются `LED(0)` и `LED(4..1)` через `assert`.

Если всё корректно, в конце будет сообщение:
`TB PASSED: all 64 vectors OK.`

---

## Примечания
- `U`/`X` в симуляции почти всегда означают **неинициализированные** или **конфликтующие** драйверы. В данном проекте выход LED формируется одним присваиванием, а входы в testbench задаются явно — поэтому `U/X` быть не должно.
- На реальной плате входы SW всегда имеют определённые уровни (0/1), поэтому “неопределённости” типично нет.

---

## (Опционально) Создание проекта из шаблона скриптом
Если используете репозиторий с `create-new-project.py`, можно создать папку проекта так:

```bash
python create-new-project.py "P04_Multiplexer"

```
